14:34:57 DEBUG - <xml><appid>wx58264149db20f28e</appid><mch_id>1428508902</mch_id><out_trade_no>20180202143457</out_trade_no><body>ninghao</body><total_fee>3</total_fee><trade_type>MWEB</trade_type><product_id>1</product_id><notify_url>https://sandbox.ninghao.net/wxpay/notify</notify_url><nonce_str>i49vqI6wz8shx8ZBHmRvkTL1YPSEHNHO</nonce_str><spbill_create_ip>47.52.137.23</spbill_create_ip><sign>9CFBDC272C868DCB1604B1D2BF5FC3BF</sign></xml>
14:36:34 DEBUG - { return_code: 'SUCCESS',
  return_msg: 'OK',
  appid: 'wx58264149db20f28e',
  mch_id: '1428508902',
  nonce_str: '1TUmaQ4ILNtfxPIx',
  sign: '500D8354117AA867EDF70C6869A8585C',
  result_code: 'SUCCESS',
  prepay_id: 'wx2018020214363418053ffba80540266112',
  trade_type: 'MWEB',
  mweb_url: 'https://wx.tenpay.com/cgi-bin/mmpayweb-bin/checkmweb?prepay_id=wx2018020214363418053ffba80540266112&package=1366525229' }
14:37:26 WARN - ---------------------------------------------------
14:37:26 INFO - Request {
  request: 
   IncomingMessage {
     _readableState: 
      ReadableState {
        objectMode: false,
        highWaterMark: 16384,
        buffer: [BufferList],
        length: 0,
        pipes: null,
        pipesCount: 0,
        flowing: true,
        ended: true,
        endEmitted: true,
        reading: false,
        sync: false,
        needReadable: false,
        emittedReadable: false,
        readableListening: false,
        resumeScheduled: false,
        destroyed: false,
        defaultEncoding: 'utf8',
        awaitDrain: 0,
        readingMore: false,
        decoder: null,
        encoding: null },
     readable: false,
     domain: null,
     _events: {},
     _eventsCount: 0,
     _maxListeners: undefined,
     socket: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: true,
        _bytesDispatched: 0,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Server],
        _server: [Server],
        _idleTimeout: 120000,
        _idleNext: [TimersList],
        _idlePrev: [TimersList],
        _idleStart: 40348,
        _destroyed: false,
        parser: [HTTPParser],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [ServerResponse],
        [Symbol(asyncId)]: 333,
        [Symbol(bytesRead)]: 0,
        [Symbol(asyncId)]: 334,
        [Symbol(triggerAsyncId)]: 10 },
     connection: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: true,
        _bytesDispatched: 0,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Server],
        _server: [Server],
        _idleTimeout: 120000,
        _idleNext: [TimersList],
        _idlePrev: [TimersList],
        _idleStart: 40348,
        _destroyed: false,
        parser: [HTTPParser],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [ServerResponse],
        [Symbol(asyncId)]: 333,
        [Symbol(bytesRead)]: 0,
        [Symbol(asyncId)]: 334,
        [Symbol(triggerAsyncId)]: 10 },
     httpVersionMajor: 1,
     httpVersionMinor: 0,
     httpVersion: '1.0',
     complete: true,
     headers: 
      { 'x-real-ip': '140.207.54.74',
        'x-forwarded-for': '140.207.54.74',
        host: 'sandbox.ninghao.net',
        connection: 'close',
        'content-length': '774',
        accept: '*/*',
        pragma: 'no-cache',
        'user-agent': 'Mozilla/4.0',
        'content-type': 'text/xml' },
     rawHeaders: 
      [ 'X-Real-IP',
        '140.207.54.74',
        'X-Forwarded-For',
        '140.207.54.74',
        'Host',
        'sandbox.ninghao.net',
        'Connection',
        'close',
        'Content-Length',
        '774',
        'Accept',
        '*/*',
        'Pragma',
        'no-cache',
        'User-Agent',
        'Mozilla/4.0',
        'Content-Type',
        'text/xml' ],
     trailers: {},
     rawTrailers: [],
     upgrade: false,
     url: '/wxpay/notify',
     method: 'POST',
     statusCode: null,
     statusMessage: null,
     client: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: true,
        _bytesDispatched: 0,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Server],
        _server: [Server],
        _idleTimeout: 120000,
        _idleNext: [TimersList],
        _idlePrev: [TimersList],
        _idleStart: 40348,
        _destroyed: false,
        parser: [HTTPParser],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [ServerResponse],
        [Symbol(asyncId)]: 333,
        [Symbol(bytesRead)]: 0,
        [Symbol(asyncId)]: 334,
        [Symbol(triggerAsyncId)]: 10 },
     _consuming: true,
     _dumped: false,
     _parsedUrl: 
      Url {
        protocol: null,
        slashes: null,
        auth: null,
        host: null,
        port: null,
        hostname: null,
        hash: null,
        search: null,
        query: null,
        pathname: '/wxpay/notify',
        path: '/wxpay/notify',
        href: '/wxpay/notify',
        _raw: '/wxpay/notify' },
     read: [Function] },
  params: {},
  response: 
   ServerResponse {
     domain: null,
     _events: { finish: [Function: bound resOnFinish] },
     _eventsCount: 1,
     _maxListeners: undefined,
     output: [],
     outputEncodings: [],
     outputCallbacks: [],
     outputSize: 0,
     writable: true,
     _last: false,
     upgrading: false,
     chunkedEncoding: false,
     shouldKeepAlive: false,
     useChunkedEncodingByDefault: false,
     sendDate: true,
     _removedConnection: false,
     _removedContLen: false,
     _removedTE: false,
     _contentLength: null,
     _hasBody: true,
     _trailer: '',
     finished: false,
     _headerSent: false,
     socket: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: true,
        _bytesDispatched: 0,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Server],
        _server: [Server],
        _idleTimeout: 120000,
        _idleNext: [TimersList],
        _idlePrev: [TimersList],
        _idleStart: 40348,
        _destroyed: false,
        parser: [HTTPParser],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [Circular],
        [Symbol(asyncId)]: 333,
        [Symbol(bytesRead)]: 0,
        [Symbol(asyncId)]: 334,
        [Symbol(triggerAsyncId)]: 10 },
     connection: 
      Socket {
        connecting: false,
        _hadError: false,
        _handle: [TCP],
        _parent: null,
        _host: null,
        _readableState: [ReadableState],
        readable: true,
        domain: null,
        _events: [Object],
        _eventsCount: 10,
        _maxListeners: undefined,
        _writableState: [WritableState],
        writable: true,
        allowHalfOpen: true,
        _bytesDispatched: 0,
        _sockname: null,
        _pendingData: null,
        _pendingEncoding: '',
        server: [Server],
        _server: [Server],
        _idleTimeout: 120000,
        _idleNext: [TimersList],
        _idlePrev: [TimersList],
        _idleStart: 40348,
        _destroyed: false,
        parser: [HTTPParser],
        on: [Function: socketOnWrap],
        _paused: false,
        read: [Function],
        _consuming: true,
        _httpMessage: [Circular],
        [Symbol(asyncId)]: 333,
        [Symbol(bytesRead)]: 0,
        [Symbol(asyncId)]: 334,
        [Symbol(triggerAsyncId)]: 10 },
     _header: null,
     _onPendingData: [Function: bound updateOutgoingData],
     _sent100: false,
     _expect_continue: false,
     [Symbol(outHeadersKey)]: 
      { 'access-control-allow-origin': [Array],
        'set-cookie': [Array],
        'x-frame-options': [Array],
        'x-xss-protection': [Array],
        'x-content-type-options': [Array],
        'x-download-options': [Array] } },
  Config: 
   Config {
     _configPath: '/Users/xiaoxue/Desktop/playground/ninghao-sandbox-v2/config',
     _config: 
      { app: [Object],
        auth: [Object],
        bodyParser: [Object],
        cors: [Object],
        database: [Object],
        session: [Object],
        shield: [Object],
        wxpay: [Object] } },
  _qs: {},
  _all: {},
  _body: {},
  _raw: '<xml><appid><![CDATA[wx58264149db20f28e]]></appid>\n<bank_type><![CDATA[CFT]]></bank_type>\n<cash_fee><![CDATA[3]]></cash_fee>\n<fee_type><![CDATA[CNY]]></fee_type>\n<is_subscribe><![CDATA[Y]]></is_subscribe>\n<mch_id><![CDATA[1428508902]]></mch_id>\n<nonce_str><![CDATA[cAxQJkNsg3g6mgh9UqItm9NOaCk1TU5B]]></nonce_str>\n<openid><![CDATA[osbKIjtJPwZzfMea5X7Q_q2tH_EU]]></openid>\n<out_trade_no><![CDATA[20180202143713]]></out_trade_no>\n<result_code><![CDATA[SUCCESS]]></result_code>\n<return_code><![CDATA[SUCCESS]]></return_code>\n<sign><![CDATA[64E284649A8DE7958C20EB9386F2B3D6]]></sign>\n<time_end><![CDATA[20180202143725]]></time_end>\n<total_fee>3</total_fee>\n<trade_type><![CDATA[MWEB]]></trade_type>\n<transaction_id><![CDATA[4200000071201802025586815306]]></transaction_id>\n</xml>',
  _files: {},
  multipart: 
   Multipart {
     req: 
      IncomingMessage {
        _readableState: [ReadableState],
        readable: false,
        domain: null,
        _events: {},
        _eventsCount: 0,
        _maxListeners: undefined,
        socket: [Socket],
        connection: [Socket],
        httpVersionMajor: 1,
        httpVersionMinor: 0,
        httpVersion: '1.0',
        complete: true,
        headers: [Object],
        rawHeaders: [Array],
        trailers: {},
        rawTrailers: [],
        upgrade: false,
        url: '/wxpay/notify',
        method: 'POST',
        statusCode: null,
        statusMessage: null,
        client: [Socket],
        _consuming: true,
        _dumped: false,
        _parsedUrl: [Url],
        read: [Function] },
     _filesToAccess: {},
     _wildcard: {},
     _multipartyOptions: { autoFields: true, autoFiles: false },
     _fieldsCallback: null,
     jar: FileJar { _files: [] },
     _processedStream: false,
     _pendingPromises: Set {} },
  nonce: 'd760a5bb-98b9-46bf-84ef-076295160adb',
  csrfToken: 'P6VUOJDD-uyHOL-3sVHmGtysiL3WCJWBcSJU' }
14:37:26 INFO - 支付结果： { appid: 'wx58264149db20f28e',
  bank_type: 'CFT',
  cash_fee: '3',
  fee_type: 'CNY',
  is_subscribe: 'Y',
  mch_id: '1428508902',
  nonce_str: 'cAxQJkNsg3g6mgh9UqItm9NOaCk1TU5B',
  openid: 'osbKIjtJPwZzfMea5X7Q_q2tH_EU',
  out_trade_no: '20180202143713',
  result_code: 'SUCCESS',
  return_code: 'SUCCESS',
  sign: '64E284649A8DE7958C20EB9386F2B3D6',
  time_end: '20180202143725',
  total_fee: '3',
  trade_type: 'MWEB',
  transaction_id: '4200000071201802025586815306' }
14:37:26 INFO - 结果签名： 64E284649A8DE7958C20EB9386F2B3D6
14:37:26 INFO - 自制签名： 64E284649A8DE7958C20EB9386F2B3D6
14:37:26 DEBUG - 回复代码： SUCCESS
14:37:31 DEBUG - 查询结果： { return_code: 'SUCCESS',
  return_msg: 'OK',
  appid: 'wx58264149db20f28e',
  mch_id: '1428508902',
  nonce_str: 'bUVxRQYiHrXiR5YA',
  sign: 'A3B4E64BFAD86B83EE7A852408DD1A11',
  result_code: 'SUCCESS',
  openid: 'osbKIjtJPwZzfMea5X7Q_q2tH_EU',
  is_subscribe: 'Y',
  trade_type: 'MWEB',
  bank_type: 'CFT',
  total_fee: '3',
  fee_type: 'CNY',
  transaction_id: '4200000071201802025586815306',
  out_trade_no: '20180202143713',
  attach: undefined,
  time_end: '20180202143725',
  trade_state: 'SUCCESS',
  cash_fee: '3' }
